<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Pod::Advent 0.07 (Pod::Simple 3.03, Perl::Tidy 20031021) on 2008-11-30 23:12:23 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>2008 Perl Advent Calendar: Episode 208</title>
<link rel="stylesheet" href="../style.css" type="text/css" /></head>
<link rel="alternate" type="text/plain" href="mod1.pod" />
<body>
<h1><a href="../">Perl Advent Calendar 2008-12</a>-01</h1>
<h2 align="center">Episode 208</h2>
<!-- "Santa's Warnings", not "Xmas story" as IMDB has it. -->
<h3 align="center">by Jerrad Pierce</h3>
<p>Thanks to recent lay-offs and the switch from toys to weapons of mass destruction&mdash;more bang for your labor buck afterall&mdash;Santa's workforce is down to a handful of Neptunians. To further demoralize his minions, Santa has taken to designating his organic production units by letters, rather than names. Worse still, a Neptunian's place in the alphabet indicates the fat one's regard for his position. Little surprise then that the IT guy is letter Y, just above the robot reindeer exhaust port scrubber.</p>
<p>Santa's a real ball-buster, and he forces Y to run code on a crufty old VAX, with the environment variable <span style="font-style: italic">PERL5OPT=-MY:Tools</span> to ensure that Y adheres to his B&D coding standards. Doing so loads a subclass of <tt><a href="http://search.cpan.org/search?module=ToolSet">ToolSet</a></tt>, a manipulative which abstracts the cutting and pasting of frequently used code into a single statement.</p>
<p>Although it may not be clear from the example below, particularly since so many of Santa's favorite modules act globally, <tt>ToolSet</tt>'s export method causes the specified modules to export into the caller's namespace. i.e; things are loaded in your local <tt>ToolSet</tt>, but the code <tt><span class="k">use</span>
</tt>-ing <tt>ToolSet</tt> has access to the loaded libraries' methods and procedures; without fully-qualified names. That's pretty nifty but unfortunately, as of 0.14, <tt>ToolSet</tt> doesn't support things like <tt><span class="k">no</span> <span class="w">indirect</span></tt>.</p>
<a name="mod1.pm" id="mod01.pm"></a><h2><a href="mod1.pm">mod1.pm</a></h2><pre>
<a name="package-Y::Tools"></a>   1 <span class="k">package </span><span class="i">Y::Tools</span><span class="sc">;</span>
   2 <span class="k">use</span> <span class="w">base</span> <span class="q">'ToolSet'</span><span class="sc">;</span> 
   3 
   4 <span class="c">#-T</span>
   5 <span class="k">BEGIN</span><span class="s">{</span> <span class="k">use</span> <span class="w">Taint::Runtime</span> <span class="q">'enable'</span><span class="sc">;</span> <span class="w">Taint::Runtime::taint_env</span> <span class="s">}</span>
   6 
   7 <span class="c">#-Mstrict</span>
   8 <span class="w">ToolSet</span><span class="w">-&gt;set_strict</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>
   9 
  10 <span class="c">#-w, there doesn't seem to be a way to invoke -W at run time</span>
  11 <span class="w">ToolSet</span><span class="w">-&gt;set_warnings</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>
  12 
  13 <span class="w">ToolSet</span><span class="w">-&gt;export</span><span class="s">(</span>
  14 		<span class="c">#But we can still tighten things up&hellip;</span>
  15 		<span class="q">'warnings'</span> <span class="cm">=&gt;</span> <span class="s">[</span><span class="w">FATAL</span><span class="cm">=&gt;</span><span class="q">'all'</span><span class="s">]</span><span class="cm">,</span>
  16 		
  17 		<span class="c">#&hellip;and reduce him to tears,</span>
  18 		<span class="q">'<a href="../../2006/23/">criticism</a>'</span><span class="cm">=&gt;</span><span class="q">'brutal'</span><span class="cm">,</span>
  19 		
  20 		<span class="c">#with a lovely poem.</span>
  21 		<span class="q">'Coy'</span> <span class="cm">=&gt;</span> <span class="k">undef</span><span class="cm">,</span>
  22 		
  23 		<span class="c">#Finally, let's go one 'better' than strict</span>
  24 		<span class="q">'Acme::use::strict::with::pride'</span> <span class="cm">=&gt;</span> <span class="k">undef</span><span class="cm">,</span>
  25 	       <span class="s">)</span><span class="sc">;</span>
  26 
  27 <span class="q">&quot;I perform over fifty mega-checks per second!&quot;</span><span class="sc">;</span>
</pre>
</body>
</html>
